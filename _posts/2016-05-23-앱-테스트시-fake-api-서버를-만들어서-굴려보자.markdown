---
layout: post
title:  "앱 테스트시 fake api 서버를 만들어서 굴려보자"
date:   2016-05-23 01:19:00 +0900
---

## 일단 혼자 볼라고 대충 적었습니다. 내용 수정중이니.. 좀 더 정리된 내용을 보고 싶으면 나중에 또 오세요(...)

맨날 클라쪽 개발만 하다보니 테스트 서버 환경은 누가 대충 만들어 준 것만 써봤지 직접 굴릴 생각은 안하고 있었다.  
개발을 하다보니 서버는 구현 안되어 있는 상태에서 대충 테스트는 해보고 싶은데.. 서버 개발자가 자기 할일 바빠서 도와줄 생각을 안할 때가 있다.  
그냥 손놓고 뭔가 해줄 때까지 멍때리고 있기가 답답하기만 했는데... 몇일전에 친구 녀석이 꿀팁을 알려줘서 여기다가 기록 해본다.

### 어떤 환경에서 굴릴 것인가?
아파치, 엔진엑스, 톰캣 이런거 죄다 어찌하는지 잘 모르겠고 세팅하기도 해서 node.js 환경에서 굴리는 것을 추천받았다.  

### 좀 귀찮은 방법
**express** 하고 **supervisor**를 추천 받았다.  
express는 node.js 상에서 돌아가는 웹프레임워크인데 간단하게 쓰기 좋아보였다.  
supervisor는 디렉토리내의 파일이 변경되면 자동으로 노드를 내렸다가 다시 올려주는 녀석이라고 하는데 잘은 모르겠다 -_-  

- **패키지 설치**  
npm install -g express-generator  
npm install -g supervisor

- **디렉토리내에 express 틀 생성**  
mkdir test  
cd test  
express .  
npm install  
npm start  

- **작업 디렉로티/routes/index.js 열기**  
route.get에 있는 내용을 좀 수정해서 json으로 떨어뜨리면 됨.  
어떻게 수정하는지는 대충 나중에 적어야지(....) 귀찮으니 일단 대충 적자 -_-;

### 편해보이는 방법
express와 supervisor를 추천 받은 거 까지는 좋은데... 이래저래 끄적여보니까 좀 불편하긴 하다.  
api 스펙 정의해서 일일히 코딩을 좀 해줘야하고... 그래서 추천받은 녀석이 **deployd**  
이건 사실 직접 굴려보지는 않고 친구가 굴리는 것만 구경만해봤다.  
스테틱 파일 추가해놓고 굴릴 수도 있고  테스트용도로 내려줄 것들을 미리 등록해놓고 상황에 따라 내려주는 것도 되는 것 같다.  
위에서 써놓은 좀 귀찮은 방법(....)과는 달리 웹페이지에서 추가/삭제만 해놓으면 알아서 해주는터라 써먹기도 쉽다.  

### 마무리  
hosts 에 테스트할 도메인이 localhost로 타게 하도록 세팅만 해주면 기존의 릴리즈된 녀석도 테스트하기 쉬울 듯하다.  
로컬에 있는 웹페이지나 앱을 테스트하는 거면 이걸로 해결되겠지만 모바일 기기에 올라가있는 앱을 테스트하려면  
모바일 기기가 테스트 환경에 붙을 수 있도록 추가 작업이 좀 필요하다. 맥의 경우 웹공유를 써야할테고..  
윈도우의 경우에는 usb wifi를 붙여놓고 ap로 변경하는 작업을 해줘야할텐데..  
이건 또 나중에 언젠가 시간이 남아돌면 정리를 해보도록 해야겠다.
